"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("@zxing/library"),r=require("vue"),d=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a},m={name:"image-barcode-reader",data(){return{codeReader:new s.BrowserMultiFormatReader}},methods:{onChangeInput(e){const t=e.target.files||e.dataTransfer.files;if(!t.length)return;const a=new FileReader;a.onload=this.processFile,a.readAsDataURL(t[0])},processFile(e){this.$el.innerHTML+=`<img id="image" src="${e.target.result}"/>`,this.codeReader.decodeFromImage("image").then(t=>{this.$emit("decode",t.text),this.$emit("result",t)}).catch(t=>this.$emit("error",t))}}};function u(e,t,a,o,n,i){return r.openBlock(),r.createElementBlock("input",{onChange:t[0]||(t[0]=(...l)=>i.onChangeInput&&i.onChangeInput(...l)),type:"file",name:"image",accept:"image/*",capture:"environment"},null,32)}const p=d(m,[["render",u]]);const h={name:"stream-barcode-reader",data(){return{isLoading:!0,codeReader:new s.BrowserMultiFormatReader,isMediaStreamAPISupported:navigator&&navigator.mediaDevices&&"enumerateDevices"in navigator.mediaDevices}},mounted(){if(!this.isMediaStreamAPISupported)throw new s.Exception("Media Stream API is not supported");this.start(),this.$refs.scanner.oncanplay=e=>{this.isLoading=!1,this.$emit("loaded")}},beforeUnmount(){this.codeReader.reset()},methods:{start(){this.codeReader.decodeFromVideoDevice(void 0,this.$refs.scanner,(e,t)=>{e&&(this.$emit("decode",e.text),this.$emit("result",e))})}}},c=e=>(r.pushScopeId("data-v-ec9cd3e6"),e=e(),r.popScopeId(),e),_={class:"scanner-container"},g={poster:"data:image/gif,AAAA",ref:"scanner"},v=c(()=>r.createElementVNode("div",{class:"overlay-element"},null,-1)),f=c(()=>r.createElementVNode("div",{class:"laser"},null,-1));function $(e,t,a,o,n,i){return r.openBlock(),r.createElementBlock("div",_,[r.withDirectives(r.createElementVNode("div",null,[r.createElementVNode("video",g,null,512),v,f],512),[[r.vShow,!n.isLoading]])])}const R=d(h,[["render",$],["__scopeId","data-v-ec9cd3e6"]]);exports.ImageBarcodeReader=p;exports.StreamBarcodeReader=R;
